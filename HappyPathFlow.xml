<?xml version="1.0" encoding="UTF-8"?>
<con:testSuite id="6fc45a1e-48ed-41c8-b42f-5bbeb2cd8e11" name="HappyPathFlow" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="81109151-f6f8-4e41-8739-89243eef6497" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC01_getUsers" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getAllUsers" id="042597fa-50a5-4d48-873c-bf6142a325ef"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllUsers" id="d636b272-cc09-4f96-9903-aa8c05d9ba7c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request/><con:originalUri>https://sample-4e6d.restdb.io/rest/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bdfd0b31-6689-495d-82b8-b2382065a446" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="qq" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>qq</con:entry><con:entry>h</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getUsersByQuery" id="a9403154-a6d6-4b9d-82b4-d0cd121c3796"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getUsersByQuery" id="d636b272-cc09-4f96-9903-aa8c05d9ba7c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request/><con:originalUri>https://sample-4e6d.restdb.io/rest/users</con:originalUri><con:assertion type="Simple Contains" id="894429ab-b841-4fca-945c-68b1dc4176f1" name="Contains"><con:configuration><token>qwe@gmail.com</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="q" value="{&quot;email&quot;: &quot;qwe@gmail.com&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="limitGetUserRecords" id="49fb4124-a9cf-458a-834f-af2e65497c3f"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="limitGetUserRecords" id="d636b272-cc09-4f96-9903-aa8c05d9ba7c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request/><con:originalUri>https://sample-4e6d.restdb.io/rest/users</con:originalUri><con:assertion type="JsonPath Count" id="610b77a6-d504-4f3b-8bb6-a6b4b1a7f5f1" name="JsonPath Count"><con:configuration><path>$.[*]._id</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="q" value="{&quot;active&quot;: false}"/>
  <con:entry key="h" value="{&quot;$max&quot;:2}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6d6d8a47-5911-40bc-9f4a-821df4f84bca" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC02_createUser" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="createUser" id="ba3c6e76-7d1d-4a7c-9ba5-a5d098f56a3f"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createUser" id="8d55046a-8f91-4269-be10-a77342f1e887" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request>{
  "email": "${#TestCase#email}",
  "active": ${#TestCase#active}
}</con:request><con:originalUri>https://sample-4e6d.restdb.io/rest/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a1eb7edd-7b28-4f7c-869f-2733482c8fd3" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="eb4c3247-e7a7-4bfc-89b8-5b5985f1d024" name="JsonPath Existence Match"><con:configuration><path>$._id</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="filter userId" id="94ff9433-2298-4ab3-a47f-58459814f201"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>userId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>createUser</con:sourceStep><con:sourcePath>$._id</con:sourcePath><con:targetType>userId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="createMultipleUsers" id="9ec0e236-d27c-4b4e-a2e9-76ff87915421"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils
import groovy.json.JsonSlurper
//Read bank service data from File
//create instance of GroovyUtils class.
def groovyUtils = new GroovyUtils(context)
def requestXmlHolder,responseXmlHolder
//loop through file and read the content
File reqFile = new File("C:\\Users\\syednaseru\\Desktop\\CreateUserData.txt")
def lineData
reqFile.eachLine{
	line->
	lineData = line.split(',')
	testRunner.testCase.setPropertyValue("email" , lineData[0]);
	testRunner.testCase.setPropertyValue("active" , lineData[1]);
	
def testStep = testRunner.testCase.getTestStepByName('createUser')
	//Run the testStep
def response = testStep.run(testRunner , context)
log.info response.responseContent

def jsonSlurper = new JsonSlurper()
def jsonResponse = jsonSlurper.parseText(response.responseContent)
testRunner.testCase.testSuite.setPropertyValue("userIds" , testRunner.testCase.testSuite.getPropertyValue('userIds') + jsonResponse._id + ",");
}

//testRunner.testCase.testSuite.setPropertyValue("active" , testRunner.testCase.testSuite.getPropertyValue('userIds').replaceAll(",$" , ""));</script></con:config></con:testStep><con:properties><con:property><con:name>email</con:name><con:value>sample12052020@gmail.com</con:value></con:property><con:property><con:name>active</con:name><con:value>true</con:value></con:property></con:properties></con:testCase><con:testCase id="81dab46b-19c2-42ae-85da-3c287d87d633" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC03_getUserById" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="getUserById" id="c938eaf4-d9d2-44ed-b209-b373da146d3d"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users/{objectid}" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getUserById" id="a4ce1b72-eb3a-4dc3-94d2-78ce37907149" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request/><con:originalUri>https://sample-4e6d.restdb.io/rest/users/5eb91efe00aa1679000007d7</con:originalUri><con:assertion type="JsonPath Match" id="147e2e6f-13bb-4d26-8f0b-432d6aee6123" name="JsonPath Match"><con:configuration><path>$._id</path><content>${#TestSuite#userId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="objectid" value="${#TestSuite#userId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="bc0a9f5a-a84b-4f66-9806-83fc71e1a5d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC04_updateUser" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="updateUser_PUT" id="11f63931-8a9a-48c4-a6e8-0a9bf3c48ef9"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users/{objectid}" methodName="PUT" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="updateUser_PUT" id="81e1e7ff-6eed-4154-b05a-c833d9605ce5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request>{
	"_id": "${#TestSuite#userId}",
  "email": "${#TestCase#updatedEmail}",
  "active": ${#TestCase#active}
}</con:request><con:originalUri>https://sample-4e6d.restdb.io/rest/users/</con:originalUri><con:assertion type="Simple Contains" id="29e4d76b-41e4-4fd3-8a1d-4f17a57a77ff" name="Contains"><con:configuration><token>${#TestCase#updatedEmail}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="objectid" value="${#TestSuite#userId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="ExcecuteGetUser" id="66985698-ad44-437a-9de0-c9cd596d16c2"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def testStepName = 'getUserById'

def testStep = testRunner.testCase.testSuite.getTestCaseByName('TC03_getUserById').getTestStepByName(testStepName)
//Run the testStep
def response = testStep.run(testRunner , context)
log.info response.responseContent

def jsonSlurper = new JsonSlurper()
def jsonResponse = jsonSlurper.parseText(response.responseContent)

assert jsonResponse.email == testRunner.testCase.getPropertyValue('updatedEmail')
</script></con:config></con:testStep><con:properties><con:property><con:name>updatedEmail</con:name><con:value>updated@gmail.com</con:value></con:property><con:property><con:name>active</con:name><con:value>false</con:value></con:property></con:properties></con:testCase><con:testCase id="143aa172-0391-4b64-9bd1-9ba21a793b53" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC05_updateSingleField" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="updateUser_PATCH" id="c8fcc312-7944-457c-8f13-172f0d9fcd73"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users/{objectid}" methodName="PATCH" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="updateUser_PATCH" id="89f4c3e7-977f-472a-a4bb-60099abad676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request>{
	"email": "${#TestCase#updatedEmail1}"
}
</con:request><con:originalUri>https://sample-4e6d.restdb.io/rest/users/5eb91efe00aa1679000007d7</con:originalUri><con:assertion type="Simple Contains" id="430bff48-81c4-4294-9586-1ed53c2ab7e9" name="Contains"><con:configuration><token>${#TestCase#updatedEmail1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="objectid" value="${#TestSuite#userId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="ExecuteGetUser_PATCH" id="30e3805a-db54-4369-9bf8-a625f7df7f23"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def testStepName = 'getUserById'

def testStep = testRunner.testCase.testSuite.getTestCaseByName('TC03_getUserById').getTestStepByName(testStepName)
//Run the testStep
def response = testStep.run(testRunner , context)
log.info response.responseContent

def jsonSlurper = new JsonSlurper()
def jsonResponse = jsonSlurper.parseText(response.responseContent)

assert jsonResponse.email == testRunner.testCase.getPropertyValue('updatedEmail1')
</script></con:config></con:testStep><con:properties><con:property><con:name>updatedEmail1</con:name><con:value>updatedemail1@gmail.com</con:value></con:property></con:properties></con:testCase><con:testCase id="bab49ab8-1520-43e0-b7a0-b46e6648f630" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC06_deleteSingleUser" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="deleteSingleUser" id="cabd4413-b558-4b2a-b69d-f2a5a7395973"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*/users/{objectid}" methodName="DELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="deleteSingleUser" id="6e806636-0fe0-4f5a-b8da-031431115497" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="d836d007-8f22-4954-bdc8-d66b4c8d26bd" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="objectid" value="${TestSuite#userId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="a50c3539-c3c5-4a79-84f1-07ed433c8446" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC07_deleteMultipleUsers" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="deleteMultipleUsers" id="791292af-fff6-46cb-9f7d-f44031311d8b"><con:settings/><con:config service="sample-4e6d REST API" resourcePath="/*" methodName="DELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="deleteMultipleUsers" id="6e806636-0fe0-4f5a-b8da-031431115497" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-apikey" value="9677194df0cd556c1bb2f9aeee86c7e218482" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://sample-4e6d.restdb.io</con:endpoint><con:request/><con:originalUri>https://sample-4e6d.restdb.io/rest/users/*</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="36d32e65-e43b-443a-b924-5476c3174bc5" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="q" value="{&quot;_id&quot;: [&quot;5eb932f600aa167900000c1d&quot;,&quot;5eb932f800aa167900000c1e&quot;]}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>userId</con:name><con:value>5eb91efe00aa1679000007d7</con:value></con:property><con:property><con:name>userIds</con:name><con:value>null,null,null,</con:value></con:property></con:properties></con:testSuite>